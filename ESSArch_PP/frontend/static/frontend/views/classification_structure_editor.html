<div class="classification-structure-editor margin-top-5">
    <div class="table-container" st-table="vm.structures" st-pipe="vm.getStructures">
        <div class="search-prepare-wrapper">
            <label for items-per-page></label>
            <select id="items-per-page" style="margin-right: 10px;" class="form-control items-per-page" ng-model="vm.structuresPerPage" ng-options="x for x in [5,10,20,25,50]"
                uib-popover="{{'ITEMSPERPAGE' | translate}}" popover-placement="top-left" popover-popup-delay="500" popover-append-to-body="true"></select>
            <input st-search="" class="form-control global-search" ng-attr-placeholder="{{'GLOBALSEARCH' | translate}}" type="text" uib-popover="{{'GLOBALSEARCHDESC_STRUCTURES' | translate}}"
                popover-placement="top-left" popover-popup-delay="500" popover-append-to-body="true">
            <button class="btn btn-info" ng-click="vm.newStructureModal()">{{'NEW_CLASSIFICATION_STRUCTURE' | translate}}</button>
            <div class="refresh-icon">
                <span ng-click="vm.updateStructures()" class="clickable angular-animate fa fa-refresh fa-lg" ng-class="{'fa-refresh-animate': vm.structuresLoading }" uib-popover="{{'REFRESHTABLEDESC' | translate}}" popover-placement="left" popover-popup-delay="500" popover-append-to-body="true"></span>
            </div>
        </div>
        <div class="list-view-table table-x-overflow">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th st-sort="name">
                            {{'NAME' | translate}}
                        </th>
                        <th st-sort="id">
                            {{'ID' | translate}}
                        </th>
                        <th st-sort="create_date">
                            {{'CREATE_DATE' | translate}}
                        </th>
                        <th>
                            {{'VERSION' | translate}}
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="x in vm.structures"
                        class="clickable"
                        ng-class="{'selected': vm.structure.id === x.id}"
                        ng-click="vm.structureClick(x)">
                        <td>
                            {{x.name}}
                        </td>
                        <td>
                            {{x.id}}
                        </td>
                        <td>
                            {{x.create_date | date:"yyyy-MM-dd HH:mm:ss"}}
                        </td>
                        <td>
                            {{x.version}}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <td ng-show="!initLoad" colspan="4">
            <div class="text-center" st-template="static/frontend/views/pagination.html" st-pagination="" st-items-by-page="vm.structuresPerPage"
                st-displayed-pages="7"></div>
        </td>
    </div>
    <div class="structure-edit-view" ng-if="vm.structure">
        <h4>{{'EDIT_CLASSIFICATION_STRUCTURE' | translate}}</h4>
        <div ng-if="vm.structureTreeData" js-tree="vm.structureTreeConfig" should-apply="vm.applyStructureModelChanges()" ng-model="vm.structureTreeData" tree="vm.structureTreeInstance" tree-events="changed:vm.structureTreeChange;ready:vm.treeReady;open_node:vm.expandChildren;move_node:vm.dropNode;"></div>
    </div>
</div>
