<div class="tree-result-wrapper search-detail" id="view-record">
  <div ng-if="vm.unavailable" class="view-content text-center">
    <h4>{{'PAGE_DOES_NOT_EXIST' | translate}}</h4>
    <button class="btn btn-success" ng-click="vm.gotoSearch()">{{'ACCESS.GO_TO_SEARCH' | translate}}</button>
  </div>
  <div
    id="record-tree"
    resizable
    r-directions="['right']"
    r-grabber="<div class='resize-grabber'></div>"
    r-flex="true"
    class="record-tree"
    ng-if="vm.recordTreeData && !vm.unavailable"
  >
    <div ng-include src="'static/frontend/views/search_detail_tree.html'"></div>
  </div>
  <div ng-if="!vm.unavailable" class="view-content">
    <div class="detail-header">
      <div ng-include src="'static/frontend/views/search_detail_breadcrumbs.html'"></div>
    </div>
    <hr class="small" />
    <div class="type-specific-results" ng-switch="vm.record._index">
      <h3>{{vm.record.reference_code}} {{vm.record.name}}</h3>
      <p>{{vm.record.description}}</p>
      <div ng-if="vm.record.identifiers.length > 0" class="pb-base">
        <label>
          {{'ACCESS.IDENTIFIERS' | translate}}
        </label>
        <div ng-repeat="x in vm.record.identifiers">
          {{x.type + ': ' + x.identifier}}
        </div>
      </div>
      <h4>
        {{'ACCESS.RELATED_STRUCTURE_UNITS' | translate}}
      </h4>
      <div class="table-container table-x-overflow">
        <table class="table">
          <thead>
            <tr>
              <th>
                {{'NAME' | translate}}
              </th>
              <th>
                {{'TYPE' | translate}}
              </th>
              <th>
                {{'DESCRIPTION' | translate}}
              </th>
              <th>
                {{'ACCESS.VALID_DATE_START' | translate}}
              </th>
              <th>
                {{'ACCESS.VALID_DATE_END' | translate}}
              </th>
            </tr>
          </thead>
          <tbody>
            <tr
              ng-repeat="x in vm.record.related_structure_units"
              ng-click="vm.goToNodePage(x.id, true)"
              class="selectable"
            >
              <td>
                {{x.structure_unit.name}}
              </td>
              <td>
                {{x.type.name}}
              </td>
              <td class="oneline-ellipsis">
                {{x.description}}
              </td>
              <td>
                {{x.start_date | date:"yyyy-MM-dd"}}
              </td>
              <td>
                {{x.end_date | date:"yyyy-MM-dd"}}
              </td>
            </tr>
            <tr ng-if="vm.record.related_structure_units.length <= 0" class="empty-table-indicator">
              <td colspan="5">{{'NO_RESULTS_FOUND' | translate}}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div ng-include src="'static/frontend/views/search_detail_contents.html'"></div>
    </div>
  </div>
</div>
