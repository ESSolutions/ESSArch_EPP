<html>
    <body>
        <div class="reception">
            <div class="content-wrapper">
                <div class="list-view" ng-include src="'static/frontend/views/list_view_table.html'"></div>
                <div ng-if="requestForm" class="request-layout">
                            <form id="request-form" name="request-form" class="request-form" ng-submit="receive(includedIps)">
                            <div class="request-type">
                                <label ng-if="checkPermission('ip.receive')">
                                    <input type="radio" ng-model="vm.request.type" value="receive">
                                    Receive
                                </label><br/>
                            </div>
                            <div class="request-params">
                                <div ng-if="vm.request.type == 'receive' && checkPermission('ip.receive')">
                                    <label>
                                        Purpose
                                    </label>
                                    <input class="form-control" required="true" ng-model="vm.request.purpose">
                                </div>
                                <div ng-if="vm.request.type == 'receive' && checkPermission('ip.receive')">
                                    <label>
                                        Archive policy
                                    </label>
                                    <select type="select" required="true" class="form-control" ng-change="archivePolicyChange()" ng-model="vm.request.archivePolicy.value" ng-options="x as x.policy_name for x in vm.request.archivePolicy.options"></select>
                                </div>
                                <div ng-if="vm.request.type == 'receive' && checkPermission('ip.receive')">
                                    <label>
                                        Information class
                                    </label>
                                    <input class="form-control" disabled="true" ng-model="vm.request.informationClass">
                                </div>
                                <div uib-alert ng-if="informationClassAlert" style="width: 75%;" ng-class="'alert-' + (informationClassAlert.type || 'warning')">{{informationClassAlert.message}}</div>
                                <div ng-if="vm.request.type == 'receive' && checkPermission('ip.receive')">
                                    <label>
                                        Tags
                                    </label>
                                    <ui-select multiple ng-model="vm.request.tags.value" theme="bootstrap" sortable="true" close-on-select="false">
                                        <ui-select-match placeholder="Select tags...">{{$item.name}}</ui-select-match>
                                        <ui-select-choices repeat="x in vm.request.tags.options | propsFilter: {name: $select.search}">
                                            <div ng-bind-html="x.name | highlight: $select.search"></div>
                                        </ui-select-choices>
                                    </ui-select>
                                </div>
                                <div ng-if="vm.request.type == 'receive' && checkPermission('ip.receive')">
                                    <input type="checkbox" ng-model="vm.request.allowUnknownFiles">
                                    <label>
                                        Allow unknown files
                                    </label>
                                </div>
                            </div>
                            </form>
                        </div>
                <div ng-if="(edit || eventlog || requestForm) && vm.request.type == 'receive' && checkPermission('ip.receive')" class="select-sub-edit-eventlog-wrapper">
                    <div class="edit-view">

                        <div ng-include src="'static/frontend/views/validator_choices.html'"></div>
                    </div>
                    <div ng-if="eventlog || requestForm" class="eventlog-view">
                        <form class="eventlog-form">
                            <div class="checkbox">
                                <label>
                                    <input type="checkBox" ng-disabled="informationClassAlert" ng-model="approvedToReceive">{{'APPROVEDTORECEIVE' | translate}}</input>
                                </label>
                            </div>
                            <button type="submit" form="request-form" ng-dblClick="" ng-disabled="!approvedToReceive" class="btn btn-info submit-button">{{'RECEIVESIP' | translate}}</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
